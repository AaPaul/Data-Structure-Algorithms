from typing import List
from itertools import product # 笛卡尔积
# The right solution is based on Solution1. I didn't solve this problem because of the time limitation.

class Solution1:
    def exist(self, board, word):
        def dfs(ind, i, j):
            if self.Found: return        #early stop if word is found

            if ind == k:
                self.Found = True                #for early stopping
                return 

            if i < 0 or i >= m or j < 0 or j >= n: return 
            tmp = board[i][j]
            if tmp != word[ind]: return

            board[i][j] = "#"
            for x, y in [[0,-1], [0,1], [1,0], [-1,0]]:
                dfs(ind + 1, i+x, j+y)
            board[i][j] = tmp
        
        self.Found = False
        m, n, k = len(board), len(board[0]), len(word)
        
        for i, j in product(range(m), range(n)):
            if self.Found: return True          #early stop if word is found
            dfs(0, i, j)
        return self.Found

class Solution:
    def exist(self, board: List[List[str]], word: str) -> bool:
        for i in range(len(board)):
            for j in range(len(board[0])):
                b_flag = [[0 for i in range(len(board[0]))] for j in range(len(board))]
                l_str = list(word)
                self.DFS(board, b_flag, l_str, i, j)
                if not l_str:
                    return True

        return False

    def DFS(self, b, flag, word, i, j):
        # if flag[i][j] == 0 and b[i][j] == word[pos]:
        # res = False
        if not word:
            return
        if b[i][j] == word[0]:
            flag[i][j] = 1
            t = word.pop(0) 
            # Down
            if i+1<len(b) and flag[i+1][j] == 0:
                self.DFS(b, flag, word, i+1, j)
            # Right
            if j+1<len(b[0]) and flag[i][j+1] == 0:
                self.DFS(b, flag, word, i, j+1)
            # Up
            if i-1>-1 and flag[i-1][j] == 0:
                self.DFS(b, flag, word, i-1, j)
            # Left
            if j-1>-1 and flag[i][j-1] == 0:
                self.DFS(b, flag, word, i, j-1)
            if word:
                word.insert(0, t)
                flag[i][j] = 0
                    
        
s1 = Solution()
print(s1.exist([["A","B","C","E"],["S","F","C","S"],["A","D","E","E"]], "ABCCED")) # T
print(s1.exist(([["A","B","C","E"],["S","F","E","S"],["A","D","E","E"]]), "ABCESEEEFS")) # T
print(s1.exist([["C","A","A"],["A","A","A"],["B","C","D"]], "AAB")) # T

"""
Time Limit error
[["d","g","t","j","a","l","j","w","l","w","s","b","d","p","q","n","j","n","l","v","r","a","f","r","t","m","d","r","e","c","e","k","k","x","v","l","i","e","j","w","c","d","x","f","s","o","s","e","d","f","b","x","h","g","o","a","s","t","u","z","x","y","l","i","v","g","t","g","k","e"],["e","n","i","b","s","a","r","n","g","x","u","h","u","c","p","k","c","k","e","y","j","b","w","w","j","u","c","e","c","o","j","g","d","t","j","w","t","d","l","a","a","f","j","w","j","z","g","o","j","k","m","u","o","j","q","z","f","u","g","h","i","r","n","m","k","y","k","f","b","x"],["h","b","e","r","x","o","q","g","c","b","s","o","x","g","z","n","i","g","j","o","p","r","f","e","f","p","d","r","w","e","o","e","g","v","v","f","j","n","l","n","q","e","d","n","m","d","c","u","l","l","k","b","e","p","f","k","g","i","d","f","n","u","j","v","p","g","c","y","v","o"],["l","l","u","o","a","i","t","c","f","f","n","p","i","r","h","p","d","p","y","h","u","n","d","d","k","s","l","m","q","g","c","d","t","y","t","t","h","p","x","m","w","k","b","e","e","i","t","j","a","t","s","u","i","v","a","s","n","l","f","f","u","j","k","p","i","e","l","p","v","i"],["d","r","v","e","x","z","p","s","i","r","m","b","l","u","w","n","p","m","b","u","r","v","f","c","m","n","g","x","e","b","g","h","u","b","o","r","c","f","j","k","w","v","n","j","s","m","x","h","y","y","d","p","t","i","r","h","y","z","f","c","c","n","k","w","q","a","n","s","f","z"],["e","d","w","s","m","q","e","j","x","c","h","c","r","c","n","l","k","l","k","p","p","p","e","b","l","u","b","b","m","i","c","q","l","y","k","y","p","o","h","o","s","p","r","m","r","g","x","b","t","j","s","i","y","w","k","m","s","l","n","e","u","p","x","f","p","h","f","e","y","n"],["v","q","c","o","c","v","u","z","z","n","j","t","v","j","s","h","v","k","t","k","r","p","z","o","w","r","v","c","v","t","r","q","k","t","g","o","q","a","o","r","p","z","l","l","k","d","s","g","p","n","q","g","e","s","u","b","j","s","f","g","l","w","z","x","r","f","o","j","g","c"],["b","v","d","m","i","n","r","d","v","g","q","m","n","x","e","j","y","p","b","f","v","p","d","u","o","u","a","c","d","i","e","e","d","j","s","o","z","j","r","u","s","h","g","h","g","m","q","g","b","s","l","x","h","o","r","v","k","t","y","o","b","e","u","f","o","n","t","n","y","m"],["h","s","v","q","z","c","c","q","i","e","i","u","d","r","k","w","m","v","q","m","l","r","r","f","w","h","u","r","w","v","d","f","n","z","x","n","b","a","f","j","g","n","f","l","g","q","h","u","l","x","h","w","p","a","d","n","j","a","f","f","v","k","m","k","l","k","x","m","m","e"],["y","u","r","d","f","z","v","m","u","i","m","b","g","b","d","k","o","m","k","v","t","f","g","f","r","r","r","p","g","f","t","g","z","n","j","g","m","h","v","i","p","h","j","w","i","o","g","y","a","s","u","t","z","c","b","q","v","s","h","d","y","d","j","z","s","v","g","g","c","b"],["p","r","i","a","p","s","p","x","q","p","p","m","l","q","o","m","h","m","g","q","p","g","t","z","g","n","u","o","u","w","r","j","p","b","l","h","t","a","e","l","s","w","y","d","m","m","p","v","y","x","o","o","e","h","p","m","v","j","c","r","h","t","c","y","u","n","f","p","o","m"],["a","g","i","y","l","w","n","c","s","n","z","g","d","d","p","s","r","m","b","t","d","k","m","f","j","i","v","q","x","j","c","a","r","k","y","c","j","l","g","d","b","f","l","e","l","c","x","c","p","a","y","u","l","k","c","w","v","x","o","u","i","r","u","b","d","t","f","m","g","l"],["r","h","q","c","m","d","f","l","g","w","l","e","q","y","q","u","u","n","t","j","i","b","c","c","e","f","x","j","u","e","w","l","n","n","o","b","q","v","m","y","r","a","e","j","y","x","e","v","k","x","e","s","b","i","v","f","p","u","r","j","a","n","x","o","c","n","r","v","i","e"],["v","z","e","a","i","e","x","o","z","h","o","f","c","p","n","x","w","d","t","p","o","u","d","l","k","h","a","b","e","i","h","a","j","l","a","u","s","z","k","r","g","y","x","i","n","k","h","m","p","b","b","g","x","g","r","h","o","u","i","s","e","q","u","o","d","u","k","v","v","u"],["n","c","t","m","m","i","y","w","u","o","z","w","u","w","e","n","d","u","j","l","n","o","d","j","e","j","e","o","e","z","k","t","d","d","f","s","m","g","o","i","w","n","g","q","l","l","f","o","f","r","b","u","f","f","e","j","o","k","z","u","l","j","q","p","p","v","j","d","d","z"],["l","z","m","s","r","z","d","z","n","k","q","q","f","v","x","j","g","l","v","f","i","g","q","y","x","f","v","g","i","z","f","u","y","t","o","s","s","t","r","h","d","h","y","i","c","v","t","k","j","o","p","t","x","f","r","u","l","o","d","v","p","i","p","q","e","f","i","y","y","z"],["i","c","g","g","m","k","d","g","u","o","w","j","h","t","q","a","o","d","r","t","z","g","d","q","y","h","w","g","i","w","f","q","y","n","y","l","z","b","t","t","q","r","e","z","l","x","c","b","a","t","u","z","b","x","s","a","h","o","g","p","k","o","f","l","d","f","y","d","g","t"],["w","y","k","d","a","v","a","c","y","a","v","u","c","y","s","u","y","b","k","f","q","w","v","x","h","y","e","h","d","k","a","c","l","l","f","l","i","f","p","h","h","m","b","j","k","v","f","j","y","r","q","q","o","n","p","x","n","t","f","r","g","f","t","r","q","a","e","z","f","v"],["i","o","h","l","a","r","j","f","c","h","x","s","y","n","f","n","k","t","j","p","m","p","v","h","g","n","h","m","o","o","h","y","c","o","k","c","h","v","k","k","c","j","e","c","w","k","s","g","f","b","w","t","s","t","a","a","i","h","m","x","v","v","x","z","l","j","c","s","e","o"],["e","j","x","j","n","t","v","f","z","c","i","x","v","a","s","x","c","b","e","o","a","b","l","x","a","w","h","e","p","n","s","v","w","p","e","k","k","b","r","m","d","c","j","a","e","e","x","h","f","d","x","h","e","j","e","h","f","n","n","w","b","g","s","z","x","y","j","k","a","d"],["w","d","f","h","e","l","l","d","s","s","h","q","z","n","b","g","u","g","t","k","f","u","s","x","u","p","x","f","b","x","k","x","d","p","h","h","d","s","k","v","l","t","n","m","h","o","s","d","x","m","n","c","i","f","b","e","x","y","m","y","w","w","y","z","m","f","i","r","z","u"],["m","k","o","c","x","v","s","r","y","p","d","o","r","o","t","u","s","q","t","e","p","r","b","p","s","p","u","a","g","t","w","u","g","k","w","f","h","p","w","i","g","c","w","a","q","p","u","i","g","p","p","x","g","s","o","a","h","i","c","p","d","z","j","j","j","i","q","t","z","p"],["b","f","r","x","h","j","o","c","t","w","t","i","t","c","a","h","c","j","r","f","a","v","e","k","g","p","u","z","i","v","o","l","a","h","k","k","q","z","m","j","v","f","u","r","j","u","a","m","g","s","r","g","p","x","s","x","m","o","y","x","j","o","k","m","v","v","w","l","u","k"],["x","r","p","r","i","z","n","l","n","v","f","e","c","w","d","w","v","p","l","u","o","u","i","z","g","g","w","c","r","q","m","q","j","e","j","s","f","x","d","u","u","k","y","w","g","d","v","b","s","g","v","j","a","g","k","j","m","g","n","f","y","c","w","h","i","f","b","n","e","g"],["h","z","q","h","x","w","k","s","y","e","a","v","p","d","b","z","m","n","f","b","t","f","d","r","n","l","y","o","a","f","v","h","e","n","q","d","k","c","y","k","j","y","f","y","b","j","y","p","w","f","r","r","l","u","k","a","i","j","q","i","q","l","s","w","b","i","z","l","n","x"],["v","w","y","c","u","b","l","u","r","k","c","i","d","p","e","q","r","m","b","h","x","r","v","p","n","w","z","o","h","m","o","e","i","m","i","f","n","w","b","g","i","f","q","n","w","v","d","n","j","e","x","g","x","s","x","k","o","x","z","x","j","n","d","u","b","n","b","q","j","e"],["x","t","m","n","h","i","k","k","y","w","r","v","e","o","n","c","b","d","z","c","a","k","r","f","e","s","s","h","i","e","o","f","x","a","v","e","i","h","r","i","d","k","d","i","a","s","m","b","x","l","d","z","v","w","e","c","o","z","l","x","d","z","e","a","z","b","h","k","j","y"],["u","m","i","y","w","k","s","i","m","q","v","r","p","t","o","w","x","e","v","i","d","y","k","i","y","j","l","f","v","u","f","q","j","p","q","h","a","k","q","o","a","n","f","s","g","v","o","d","a","l","o","d","j","y","n","j","j","b","r","h","v","y","x","g","o","p","o","o","z","g"],["e","c","t","l","u","c","h","k","h","j","v","v","o","g","v","e","p","h","f","i","o","a","h","n","j","v","e","x","l","d","d","p","f","w","a","b","a","j","n","i","s","i","f","h","q","b","l","g","k","q","o","a","s","v","n","b","s","t","a","d","w","d","u","e","c","v","h","c","g","v"],["m","z","f","s","i","w","t","v","e","d","n","s","f","h","q","s","l","i","l","l","o","j","p","i","p","t","f","x","x","o","s","k","n","x","c","x","v","x","s","z","c","h","u","h","o","k","b","z","u","o","l","i","x","c","t","p","x","a","m","u","o","e","g","d","d","k","a","b","h","u"],["a","l","b","u","s","s","g","v","r","b","j","e","l","j","i","e","y","f","h","k","c","v","q","k","z","v","v","b","w","e","w","z","q","z","t","k","t","a","g","l","d","r","r","o","a","a","t","a","h","a","m","j","x","e","u","y","a","p","a","y","t","y","z","l","z","t","w","t","v","c"],["g","y","t","x","o","w","x","h","w","f","j","j","q","j","p","k","h","r","b","h","q","x","h","p","i","h","k","e","a","h","i","g","h","e","f","w","a","f","f","y","k","r","j","c","a","z","p","j","q","q","t","i","p","a","y","a","j","k","g","l","u","p","r","d","v","z","z","v","e","h"],["t","q","a","d","s","a","c","h","l","s","a","e","b","r","f","b","r","q","n","y","c","j","p","t","n","k","s","o","h","y","v","a","o","v","f","h","x","h","q","j","c","q","p","f","i","u","i","b","l","x","z","p","h","q","i","w","a","d","k","j","d","i","k","s","f","p","z","d","z","p"],["o","d","i","d","k","s","a","u","t","n","r","v","c","a","l","m","w","o","r","h","x","v","p","j","n","u","b","o","z","c","f","p","h","n","t","r","f","v","l","b","k","e","w","m","f","h","a","b","x","s","i","x","p","z","g","c","u","h","s","v","l","x","l","s","n","g","j","s","b","w"],["t","n","b","r","z","i","b","b","j","y","t","u","v","k","t","e","o","p","l","g","l","z","e","y","r","r","e","d","l","h","z","h","u","c","y","v","k","b","w","w","a","q","q","x","c","j","b","r","b","p","x","m","o","d","k","f","w","q","i","i","x","k","r","r","o","r","m","b","t","i"],["x","t","a","n","s","d","y","u","w","z","l","t","n","b","x","z","g","t","p","r","d","m","d","w","f","r","o","r","u","h","c","r","c","e","g","w","j","f","s","f","g","d","b","w","e","y","v","n","t","l","g","z","x","j","v","f","c","l","w","x","u","a","q","y","h","x","v","q","e","n"],["y","m","t","z","i","x","z","e","m","u","r","s","t","q","d","r","v","i","e","u","h","z","u","x","x","d","u","u","w","a","i","u","n","b","v","v","a","w","b","p","q","s","h","m","l","n","f","g","x","j","a","e","k","x","b","i","a","y","c","y","a","m","u","n","p","p","l","s","n","o"],["h","e","j","q","s","u","f","z","a","c","k","d","g","v","a","k","f","c","k","j","b","k","w","v","a","n","n","l","f","c","b","o","i","k","f","a","e","k","b","h","p","m","k","v","h","k","h","m","o","r","v","r","e","t","p","e","j","e","r","o","g","s","d","p","d","k","p","h","w","t"],["q","l","f","a","j","m","m","q","a","b","k","x","u","o","r","j","s","c","n","j","q","u","b","v","j","g","h","a","q","e","t","g","r","a","h","a","m","v","t","o","y","d","m","t","r","f","c","l","h","s","w","z","m","z","x","x","g","e","z","w","k","t","e","c","v","l","e","i","j","x"],["w","h","c","k","a","v","p","d","i","y","v","e","y","j","e","v","i","m","b","h","k","m","c","o","q","y","c","w","g","l","u","e","s","y","r","v","w","i","y","e","h","v","j","f","g","p","c","o","b","d","v","l","r","y","b","h","y","d","e","g","q","a","k","j","a","d","e","w","m","e"],["b","t","b","m","a","j","b","c","x","e","h","u","r","z","u","s","g","s","y","m","y","o","m","l","z","n","o","f","l","c","l","m","v","m","y","x","x","b","z","u","f","j","r","w","i","n","r","q","g","p","d","g","f","r","t","f","g","k","k","s","m","w","e","k","k","f","h","i","g","j"],["e","m","s","x","k","c","l","d","s","t","s","v","b","a","p","v","f","v","h","r","n","v","p","u","f","c","b","p","m","h","y","q","v","s","q","i","u","d","l","m","w","g","k","z","g","b","w","n","w","d","e","m","z","w","i","g","y","j","x","m","s","x","e","o","p","u","w","l","x","j"],["a","v","p","m","v","x","n","r","k","j","x","r","x","y","n","f","g","n","o","e","z","h","b","d","x","t","a","v","e","x","e","e","v","w","q","s","t","d","l","e","p","i","x","m","i","m","u","p","z","i","t","a","r","w","f","q","p","h","l","u","h","s","a","c","o","r","u","j","w","f"],["n","n","q","k","a","y","w","u","p","x","e","i","z","y","h","h","o","w","o","c","q","x","u","r","z","i","k","v","t","i","b","h","w","t","t","y","r","s","u","h","r","a","r","t","y","y","c","p","v","s","r","n","q","l","g","p","v","s","n","o","d","o","x","z","h","t","z","a","n","v"],["j","g","x","b","b","w","b","d","n","y","w","e","o","m","r","u","d","m","p","q","c","s","g","c","t","p","v","s","s","k","p","b","q","m","e","s","k","g","x","x","g","t","d","u","h","u","r","n","i","g","d","l","y","m","n","r","b","k","l","t","u","a","x","m","o","b","g","b","j","e"],["a","q","z","e","m","h","a","d","u","j","j","z","w","h","l","j","a","p","v","l","k","r","n","h","d","e","j","m","f","u","q","f","k","r","j","z","a","k","c","w","v","m","w","r","v","j","c","w","a","x","j","l","o","x","u","t","b","d","f","i","a","x","n","m","p","z","l","p","j","o"],["o","e","c","k","v","x","v","x","v","w","w","h","j","k","e","d","f","h","j","l","p","j","k","c","v","z","b","h","r","m","v","f","s","z","r","p","y","m","o","u","k","k","b","t","w","h","x","c","q","g","p","f","r","z","j","m","b","n","v","s","b","s","z","u","r","s","l","q","e","a"],["m","r","m","n","m","j","w","j","n","m","r","c","t","k","d","e","x","e","r","s","w","t","l","x","p","e","p","a","u","w","a","g","n","n","v","b","y","t","n","l","h","e","p","a","r","s","f","o","x","y","i","v","t","v","v","i","a","k","l","w","i","n","f","x","c","c","z","a","w","m"],["n","d","s","e","e","j","x","l","z","w","j","k","t","d","f","o","n","h","z","y","g","j","m","l","h","o","n","g","r","j","s","e","p","m","j","v","w","i","g","x","e","r","h","x","w","n","o","k","w","p","k","c","y","w","n","f","n","d","l","e","o","f","k","d","u","t","y","q","d","g"],["n","h","a","v","h","w","k","x","i","i","m","t","l","k","r","a","q","e","d","d","k","s","l","v","x","f","o","w","x","u","e","m","b","e","j","k","d","t","h","n","e","t","g","p","g","a","r","y","e","x","d","r","p","o","m","o","v","c","m","s","w","r","f","a","x","o","m","a","k","u"],["o","o","p","w","f","v","w","y","v","d","v","z","u","m","n","i","b","l","k","n","d","h","g","k","j","e","b","v","g","l","p","w","b","h","v","i","e","t","i","a","w","e","z","s","s","o","a","v","z","n","l","f","w","r","p","f","v","q","a","e","d","s","a","g","b","x","q","f","r","z"],["h","n","f","i","i","z","z","k","v","y","z","g","f","v","x","v","a","v","n","d","b","t","x","d","z","y","b","s","f","s","t","n","h","a","v","r","z","u","c","u","v","b","c","a","z","c","x","b","z","l","g","a","g","d","d","h","b","e","z","h","y","u","w","g","u","t","z","u","o","b"],["q","l","f","t","n","g","x","l","h","w","y","o","w","e","t","b","l","v","i","n","e","g","h","a","o","c","t","o","y","j","r","o","w","y","j","k","e","g","v","o","e","v","e","a","b","x","c","o","u","k","d","y","s","l","a","h","p","w","x","n","f","o","d","e","p","p","o","t","x","l"],["j","c","g","n","c","j","n","g","x","h","s","b","i","n","o","k","u","d","g","t","s","o","h","x","u","y","o","i","s","m","t","d","o","b","t","s","m","i","b","j","r","t","m","z","g","a","m","c","f","u","v","z","k","f","z","e","d","n","m","x","z","h","d","p","k","w","i","w","e","j"],["i","v","e","u","x","n","x","l","r","e","f","n","e","q","u","f","w","z","s","j","z","u","s","c","j","f","a","t","b","e","e","l","b","l","i","a","y","f","l","p","j","r","e","p","j","a","u","f","a","n","q","z","j","j","d","s","o","d","o","r","j","s","d","k","d","l","l","d","s","w"],["v","b","p","b","t","a","c","n","i","e","c","y","f","l","j","i","e","z","l","u","r","u","m","w","g","s","j","r","x","b","q","s","e","h","u","x","k","y","l","s","c","n","q","h","z","a","r","f","z","e","z","s","y","n","o","g","h","z","a","f","a","s","z","f","z","v","e","l","t","r"],["d","x","f","w","g","g","y","x","n","x","b","o","s","b","d","i","k","n","i","k","u","k","c","t","r","d","r","w","p","m","n","s","m","u","o","s","c","m","s","p","m","v","f","g","z","j","o","j","w","y","t","q","l","x","l","c","a","e","a","p","r","o","k","d","k","a","x","n","p","p"],["e","d","l","k","l","m","v","b","v","t","a","q","j","l","n","w","p","n","b","q","f","s","e","r","x","q","r","u","d","i","k","k","n","x","u","y","j","r","a","g","k","a","w","v","n","j","r","c","y","u","s","d","o","y","u","l","r","o","i","w","y","u","g","m","t","c","k","c","t","k"],["i","f","m","g","a","b","p","u","g","n","q","y","t","f","z","p","s","s","f","c","o","e","w","v","s","p","z","c","t","t","p","d","y","d","j","b","f","y","x","l","o","n","l","j","u","m","y","n","e","e","r","v","k","o","q","c","f","p","g","z","k","v","c","l","b","m","o","i","m","l"],["t","c","a","g","l","v","v","m","k","b","q","b","w","c","r","o","e","x","e","k","w","q","i","a","b","j","o","r","r","d","c","m","f","d","u","t","y","p","f","k","t","x","l","p","z","d","e","d","a","k","p","y","a","x","a","e","i","r","v","b","u","a","n","b","f","i","u","f","z","b"],["p","s","y","c","k","z","f","o","c","h","a","u","h","a","r","i","g","c","z","e","d","v","e","r","w","l","b","t","q","c","w","h","x","v","j","j","u","p","x","z","y","z","t","g","z","m","q","i","o","r","m","u","m","s","n","k","f","q","f","v","s","c","c","r","z","n","a","t","e","z"],["u","d","y","p","l","a","c","d","i","s","w","w","m","k","q","z","u","v","p","c","s","k","e","w","d","d","j","e","y","o","f","t","t","e","i","e","g","m","j","o","h","f","m","t","p","c","v","l","z","m","n","r","y","r","n","c","u","w","i","t","m","n","o","f","t","y","j","z","l","s"],["n","s","z","b","n","o","f","k","a","e","x","p","v","v","h","k","x","d","h","f","y","v","v","m","b","o","n","m","o","y","h","d","s","g","f","h","x","k","s","x","r","r","m","m","o","v","x","m","z","g","t","x","b","q","m","e","f","z","r","t","z","y","w","t","e","d","c","b","q","w"],["a","h","n","p","t","c","k","s","q","l","a","l","l","e","c","x","i","h","y","z","c","z","z","a","s","e","e","u","h","w","r","i","d","g","z","y","k","l","t","a","x","t","o","k","z","s","j","k","z","h","j","d","g","l","d","a","p","j","w","y","f","p","i","i","w","h","j","i","v","c"],["j","s","x","z","e","x","r","n","h","s","u","s","v","c","d","a","e","u","k","a","t","r","q","d","c","o","l","l","w","g","n","h","a","k","i","g","j","z","t","q","r","p","l","o","r","o","p","v","l","b","x","g","u","p","j","w","f","w","h","c","e","w","l","g","j","u","m","s","v","f"],["l","p","u","w","d","n","m","u","k","z","x","k","f","s","z","p","o","f","l","y","j","s","w","u","y","f","q","l","a","m","s","l","d","p","j","i","c","x","f","p","x","c","z","e","w","a","t","n","f","h","n","q","z","j","l","z","p","d","k","r","r","d","e","u","u","n","d","y","m","i"],["n","j","m","o","o","j","p","j","y","w","s","l","n","t","u","a","t","l","f","d","c","x","i","g","t","c","v","y","d","k","i","q","v","v","h","l","g","y","v","e","u","p","p","j","j","l","l","c","x","r","f","b","o","q","k","j","u","h","i","x","r","q","q","n","l","z","y","t","x","v"],["x","t","l","o","d","u","a","q","w","z","h","d","c","x","v","o","h","s","w","p","r","p","f","h","e","t","g","d","m","f","a","m","z","n","c","e","h","e","u","f","f","e","l","i","b","i","w","i","a","u","z","u","k","f","b","o","a","k","t","m","p","w","a","q","j","d","u","t","h","r"],["a","p","v","l","x","w","w","v","h","y","q","g","s","c","n","w","q","n","i","m","c","z","i","c","q","r","h","m","k","r","d","l","g","y","y","f","x","w","a","g","v","s","m","p","u","c","n","l","p","v","z","t","v","h","w","n","y","f","z","l","y","d","y","e","d","w","j","c","v","m"],["i","q","e","x","h","z","z","v","m","q","q","l","k","n","s","i","a","s","p","a","f","o","f","d","s","k","c","e","n","x","s","x","p","w","w","y","x","v","t","l","o","m","w","a","z","q","i","c","l","z","c","s","n","j","w","i","t","a","o","g","x","g","g","o","e","c","m","e","a","i"],["p","o","u","o","o","v","g","y","x","r","z","b","k","n","m","i","v","g","i","j","o","h","r","u","x","v","x","l","b","x","t","r","n","p","f","d","n","l","d","m","f","c","q","r","p","c","b","m","i","j","x","x","s","o","t","p","m","q","a","n","p","w","g","e","n","n","h","a","z","k"],["p","g","n","f","z","e","h","a","t","s","j","q","p","d","h","k","u","v","b","w","k","s","s","r","x","g","e","e","i","f","r","x","n","g","c","m","m","m","m","f","e","x","y","v","a","f","f","u","a","i","r","m","b","l","d","a","t","k","g","e","p","x","b","d","f","g","p","s","s","e"],["z","y","b","x","t","e","c","a","a","e","j","r","r","m","f","w","m","y","g","u","c","y","s","g","b","z","m","s","t","g","w","t","e","a","s","z","e","v","z","e","b","i","y","s","w","d","r","i","d","x","d","i","v","x","q","y","y","e","t","s","k","r","n","q","r","f","p","x","c","q"],["c","e","b","c","y","x","h","p","i","m","p","n","w","k","m","m","l","k","q","e","e","c","x","t","s","p","z","j","o","d","c","q","h","d","u","i","a","b","z","k","q","o","x","m","b","l","z","m","w","p","s","c","u","p","w","m","g","x","y","v","c","a","n","m","f","i","u","h","l","t"],["s","b","k","r","q","l","d","p","z","b","g","t","d","a","i","b","p","r","a","p","m","d","p","b","p","w","j","l","d","x","e","v","a","q","n","q","b","s","h","c","t","q","v","w","q","g","a","h","x","a","w","l","f","n","m","u","j","y","f","n","v","m","k","x","e","z","q","g","r","z"],["k","k","p","g","j","i","m","l","p","l","n","m","w","t","z","i","p","l","g","x","y","d","l","i","d","p","i","t","x","b","u","i","m","k","o","x","s","c","i","h","n","v","v","l","q","x","t","g","i","c","d","i","h","o","q","k","f","a","f","d","c","a","l","q","m","b","p","e","d","x"],["n","s","u","j","d","l","i","y","t","q","a","y","y","k","o","q","w","t","r","c","w","v","e","j","n","s","k","c","w","n","b","j","h","v","u","k","i","c","j","d","u","l","b","s","v","r","j","s","l","c","w","j","z","c","t","m","u","d","q","q","t","r","b","a","o","y","l","z","a","w"],["c","v","h","g","p","d","z","a","v","k","c","t","w","d","v","r","p","p","u","f","f","p","y","i","s","n","g","f","m","j","b","q","e","i","y","v","n","y","w","k","k","a","d","g","e","y","x","v","n","u","d","u","j","b","d","b","o","l","g","c","u","j","v","a","s","t","w","h","r","s"],["s","e","s","v","k","w","u","i","s","h","e","v","c","p","y","h","r","p","s","z","r","n","j","o","n","d","i","l","k","b","d","e","f","w","a","s","u","u","c","m","d","g","j","h","v","i","o","o","x","j","q","q","w","b","h","l","g","r","x","s","u","c","x","a","y","x","u","t","t","w"],["h","w","e","t","e","b","d","s","s","c","b","i","u","z","l","b","n","r","s","m","l","n","o","i","p","p","h","j","k","a","h","t","z","n","m","d","o","p","x","g","t","b","q","o","c","b","p","p","u","k","d","g","z","s","q","o","j","y","z","t","y","i","o","z","v","b","c","j","s","c"],["s","m","d","i","c","f","m","t","x","g","d","a","o","c","u","f","s","f","f","r","a","f","z","p","f","w","q","h","g","k","j","y","y","o","i","a","u","w","w","t","d","z","v","t","e","s","a","y","x","f","s","y","l","r","n","q","o","f","z","w","p","l","w","q","z","g","s","v","d","o"],["q","i","q","m","b","w","e","c","u","b","j","m","b","w","g","o","o","w","v","o","u","n","b","q","d","a","w","v","y","z","m","o","j","e","a","l","a","e","p","w","i","a","j","j","x","r","a","l","n","v","b","h","i","c","z","n","d","x","l","d","z","x","r","i","b","u","t","d","a","k"],["z","i","l","k","u","k","b","u","v","o","r","x","x","a","z","w","p","e","w","a","h","v","z","b","d","a","v","z","f","v","j","f","g","w","p","a","g","r","w","e","h","n","b","h","p","c","f","f","j","b","h","q","w","h","t","a","j","o","z","p","m","k","w","u","h","l","u","p","e","s"],["t","o","h","w","v","z","b","a","g","k","c","n","c","a","u","w","a","g","m","b","v","y","m","r","u","v","e","q","m","j","i","i","x","s","g","s","r","h","u","x","r","y","k","u","z","h","s","z","n","e","d","k","f","p","b","z","m","h","q","y","q","a","i","n","s","p","h","j","w","e"],["i","q","c","v","m","b","e","e","d","r","k","g","d","p","x","g","r","l","n","j","l","e","j","u","t","e","l","d","p","j","h","y","z","j","v","n","n","z","r","s","s","c","y","v","t","x","b","k","i","o","t","v","u","f","p","q","j","c","t","y","m","c","y","l","n","t","z","a","s","s"],["s","k","w","s","h","s","r","k","e","b","b","y","x","v","f","o","n","o","r","g","o","f","k","n","q","y","g","r","a","b","m","v","n","k","n","v","c","h","f","h","k","g","h","h","e","m","y","r","c","r","y","q","w","k","f","o","i","o","i","j","p","u","e","c","e","t","z","j","a","f"],["q","n","l","x","u","p","j","u","j","n","l","h","f","j","t","l","y","c","z","i","l","q","c","r","u","i","k","u","r","n","z","h","a","m","g","w","e","p","t","n","e","g","w","k","q","p","v","q","t","w","y","g","o","c","x","i","k","k","e","e","z","f","n","b","u","u","z","y","l","s"],["n","s","z","l","c","r","c","z","h","w","x","f","e","n","h","c","v","t","o","c","z","n","h","p","q","b","l","p","b","y","k","q","q","j","d","s","c","g","t","j","e","q","q","i","d","x","m","b","s","a","f","s","p","m","j","f","q","u","x","t","s","h","k","j","s","p","d","u","x","x"],["f","b","p","v","m","v","u","a","y","m","b","d","g","s","p","p","y","h","l","v","b","e","e","n","p","w","e","u","s","c","r","x","f","j","s","r","g","o","s","e","a","v","h","j","n","y","a","n","g","m","k","j","q","o","y","f","m","c","z","g","g","t","d","m","e","x","f","k","l","z"],["o","o","w","v","z","k","v","z","z","b","l","k","m","b","a","m","i","p","r","k","v","x","f","b","l","j","a","r","v","o","s","j","c","p","g","b","b","d","a","a","f","o","m","t","p","n","i","a","e","z","k","z","y","p","a","k","a","d","d","v","r","v","g","v","k","o","w","l","r","y"],["m","y","m","y","u","e","n","c","e","r","b","q","t","z","h","v","l","h","y","o","e","p","k","m","k","u","c","i","i","v","j","u","w","x","u","q","b","k","u","h","d","x","x","w","y","e","s","k","n","q","y","t","i","i","f","u","f","j","d","n","f","o","j","d","l","f","t","p","p","p"],["w","t","m","w","r","k","c","j","u","s","c","v","l","m","f","t","g","m","e","l","b","j","z","m","m","l","s","h","c","j","w","y","e","k","w","w","v","b","h","r","t","l","o","g","x","u","z","g","i","g","r","k","p","r","w","e","e","o","n","g","a","m","g","g","w","d","c","t","g","m"],["n","z","x","b","f","x","x","h","d","g","n","w","q","e","n","m","k","t","d","y","b","f","m","i","l","i","n","q","e","t","c","r","u","b","u","b","y","s","i","d","y","x","a","q","e","p","c","o","j","h","o","m","o","a","u","a","l","j","q","r","e","u","i","y","v","c","c","w","w","k"],["z","u","k","z","k","o","p","p","e","a","y","v","m","n","x","j","p","i","u","f","b","z","b","j","z","y","o","b","u","m","o","u","h","a","v","t","q","m","k","u","m","l","p","b","y","p","k","n","z","e","u","b","f","v","m","f","v","a","i","q","p","y","m","w","y","j","r","o","w","e"],["l","k","p","c","l","n","r","v","c","r","c","w","s","h","t","e","o","o","h","z","g","w","x","s","u","w","c","n","m","a","r","x","k","g","c","w","v","t","t","x","k","x","v","e","h","q","j","v","h","s","u","n","q","u","i","m","q","m","z","e","m","r","e","y","z","g","w","v","z","q"],["s","m","p","q","q","w","g","b","s","p","v","o","f","l","i","n","x","a","b","x","f","p","q","j","n","p","r","k","k","q","c","f","c","r","v","v","o","d","w","i","t","s","y","y","d","h","n","d","j","o","a","q","d","s","b","s","h","s","e","s","l","g","x","n","a","u","i","o","x","h"],["y","q","z","w","o","e","f","b","h","r","r","j","h","w","d","j","p","l","d","v","f","o","c","e","c","c","y","m","s","v","v","q","m","u","o","c","b","w","g","k","n","z","w","u","w","z","f","n","m","j","i","r","z","m","v","d","q","t","s","i","r","n","a","f","k","r","h","l","n","p"]]
"cptynvechpk"
"""

# Reference
# https://leetcode.com/problems/word-search/discuss/747144/Python-dfs-backtracking-solution-explained
# https://leetcode.com/problems/word-search/discuss/748287/Python-solution%3A-Typical-backtrack-problem
# https://leetcode.com/problems/word-search/discuss/747649/Simple-to-Understand-Python